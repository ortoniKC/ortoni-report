<!DOCTYPE html>
<html lang="en" data-theme="{{preferredTheme}}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Playwright HTML report by LetCode Koushik - V2.0.3">
    <title>{{title}}</title>
    <link rel="icon" href="node_modules/ortoni-report/dist/icon/32.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<style>
    {{{inlineCss}}}
  </style>
<body>
    {{> navbar}}
    <section class="section">
        <main class="container">
            <div class="columns">
                <aside class="column is-two-fifths">
                    {{> testPanel}}
                    <div class="content sidebar">
                        {{#if showProject}}
                        {{#each groupedResults}}
                        <details class="box">
                            <summary class="is-size-5 has-icon-right">
                                <div class="icon-text">
                                    <span class="icon has-text-info">
                                    <svg class="image is-16x16" height="512" viewBox="0 0 32 32" width="512" xmlns="http://www.w3.org/2000/svg"><g data-name="Layer 2"><path d="M11.612 30.945a3.986 3.986 0 01-2.829-1.17l-5.209-5.208a4.006 4.006 0 010-5.657l3.955-3.954a1 1 0 011.414 1.414l-3.955 3.954a2.003 2.003 0 000 2.829l5.21 5.208a2.004 2.004 0 002.828 0l7.235-7.234a2.003 2.003 0 000-2.828l-4.63-4.63a1 1 0 011.414-1.414l4.63 4.63a4.006 4.006 0 010 5.657l-7.235 7.233a3.988 3.988 0 01-2.828 1.17z" fill="#232323"/><path d="M15.662 20.038a.997.997 0 01-.707-.293l-4.63-4.63a4.006 4.006 0 010-5.656l7.235-7.234a4.004 4.004 0 015.657 0l5.209 5.208a4.006 4.006 0 010 5.657l-3.955 3.954a1 1 0 01-1.414-1.414l3.955-3.954a2.003 2.003 0 000-2.829l-5.21-5.208a2.002 2.002 0 00-2.828 0l-7.235 7.234a2.003 2.003 0 000 2.828l4.63 4.63a1 1 0 01-.707 1.707z" fill="#7fbde7"/></g></svg>
                                    </span>
                                    <span>{{@key}}</span>
                                </div>
                            </summary>
                            <ul class="mt-4 mb-4">
                                {{#each this}}
                                <details class="mt-2 mb-2">
                                    <summary class="is-size-5 is-capitalized">
                                        <div class="icon-text">
                                            <span class="icon has-text-info">
                                                <svg class="image is-16x16"xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M181.344 42.656v394.671C181.344 478.562 214.781 512 256 512c41.25 0 74.672-33.438 74.672-74.673V42.656H181.344z" fill="#e6e9ed"/><path d="M352 32c0 17.672-14.312 32-32 32H192c-17.656 0-32-14.328-32-32s14.344-32 32-32h128c17.688 0 32 14.328 32 32z" fill="#ccd1d9"/><path d="M181.344 192v245.327C181.344 478.562 214.781 512 256 512c41.25 0 74.672-33.438 74.672-74.673V192H181.344z" fill="#a0d468"/><g fill="#434a54"><path d="M245.344 266.655c0-5.89-4.781-10.655-10.672-10.655h-53.328v21.328h53.328c5.89 0 10.672-4.781 10.672-10.673zM234.672 319.999h-53.328v21.328h53.328c5.891 0 10.672-4.781 10.672-10.671s-4.782-10.657-10.672-10.657zM245.344 202.656c0-5.891-4.781-10.656-10.672-10.656h-53.328v21.328h53.328c5.89 0 10.672-4.781 10.672-10.672z"/></g></svg>
                                            </span>
                                            <span>{{@key}}</span>
                                        </div>
                                    </summary>
                                    <ul class="mt-4 mb-4">
                                        {{#each this}}
                                        <details class="mt-2 mb-2">
                                            <summary class="is-capitalized is-size-6">{{@key}}</summary>
                                            <ul class="mt-4 mb-4">
                                                {{#each this}}
                                                <li class="media {{#if (eq status 'skipped')}}is-hidden{{/if}}" data-suite-name="{{suite}}"
                                                    data-test-duration="{{duration}}" data-test-tags="{{joinWithSpace testTags}}" 
                                                    data-project-name="{{projectName}}" data-test-id="{{index}}"
                                                    data-test-status="{{status}} {{retry}}">
                                                    {{> testStatus}}
                                                </li>
                                                {{/each}}
                                            </ul>
                                        </details>
                                        {{/each}}
                                    </ul>
                                </details>
                                {{/each}}
                            </ul>
                        </details>
                        {{/each}}
                        {{else}}
                        {{#each groupedResults}}
                        <details class="box">
                            <summary class="is-size-5 has-icon-right">
                                <div class="icon-text">
                                    <span class="icon has-text-info">
                                        <svg class="image is-16x16" height="512" viewBox="0 0 32 32" width="512" xmlns="http://www.w3.org/2000/svg"><g data-name="Layer 2"><path d="M11.612 30.945a3.986 3.986 0 01-2.829-1.17l-5.209-5.208a4.006 4.006 0 010-5.657l3.955-3.954a1 1 0 011.414 1.414l-3.955 3.954a2.003 2.003 0 000 2.829l5.21 5.208a2.004 2.004 0 002.828 0l7.235-7.234a2.003 2.003 0 000-2.828l-4.63-4.63a1 1 0 011.414-1.414l4.63 4.63a4.006 4.006 0 010 5.657l-7.235 7.233a3.988 3.988 0 01-2.828 1.17z" fill="#232323"/><path d="M15.662 20.038a.997.997 0 01-.707-.293l-4.63-4.63a4.006 4.006 0 010-5.656l7.235-7.234a4.004 4.004 0 015.657 0l5.209 5.208a4.006 4.006 0 010 5.657l-3.955 3.954a1 1 0 01-1.414-1.414l3.955-3.954a2.003 2.003 0 000-2.829l-5.21-5.208a2.002 2.002 0 00-2.828 0l-7.235 7.234a2.003 2.003 0 000 2.828l4.63 4.63a1 1 0 01-.707 1.707z" fill="#7fbde7"/></g></svg>
                                    </span>
                                    <span>{{@key}}</span>
                                </div>
                            </summary>
                            <ul class="mt-4 mb-4">
                                {{#each this}}
                                <details class="mt-2 mb-2">
                                    <summary class="is-size-5 is-capitalized">
                                        <div class="icon-text">
                                            <span class="icon has-text-info">
                                            <svg class="image is-16x16"xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M181.344 42.656v394.671C181.344 478.562 214.781 512 256 512c41.25 0 74.672-33.438 74.672-74.673V42.656H181.344z" fill="#e6e9ed"/><path d="M352 32c0 17.672-14.312 32-32 32H192c-17.656 0-32-14.328-32-32s14.344-32 32-32h128c17.688 0 32 14.328 32 32z" fill="#ccd1d9"/><path d="M181.344 192v245.327C181.344 478.562 214.781 512 256 512c41.25 0 74.672-33.438 74.672-74.673V192H181.344z" fill="#a0d468"/><g fill="#434a54"><path d="M245.344 266.655c0-5.89-4.781-10.655-10.672-10.655h-53.328v21.328h53.328c5.89 0 10.672-4.781 10.672-10.673zM234.672 319.999h-53.328v21.328h53.328c5.891 0 10.672-4.781 10.672-10.671s-4.782-10.657-10.672-10.657zM245.344 202.656c0-5.891-4.781-10.656-10.672-10.656h-53.328v21.328h53.328c5.89 0 10.672-4.781 10.672-10.672z"/></g></svg>
                                            </span>
                                            <span>{{@key}}</span>
                                        </div>
                                    </summary>
                                    <ul class="mt-4 mb-4">
                                    {{#each this}}
                                    <li class="media {{#if (eq status 'skipped')}}is-hidden{{/if}}" data-suite-name="{{suite}}"
                                        data-test-duration="{{duration}}" data-test-tags="{{joinWithSpace testTags}}" 
                                        data-project-name="{{projectName}}" data-test-id="{{index}}"
                                        data-test-status="{{status}} {{retry}}">
                                        {{> testStatus}}
                                    </li>
                                    {{/each}} 
                                    </ul>   
                                </details>
                                {{/each}}
                            </ul>
                        </details>
                        {{/each}}
                        {{/if}}
                    </div>
                </aside>
                <section class="column is-three-fifths">
                    {{!-- Overall summary --}}
                    <div id="summary">
                        <div class="columns is-multiline">
                            {{> summaryCard bg="primary" status="all" statusHeader="All Tests" statusCount=totalCount}}
                            {{> summaryCard bg="success" status="passed" statusHeader="Passed" statusCount=passCount}}
                            {{> summaryCard bg="danger" status="failed" statusHeader="Failed" statusCount=failCount}}
                        </div>
                        <div class="columns is-multiline">
                            {{> summaryCard bg="info" status="skipped" statusHeader="Skipped" statusCount=skipCount}}
                            {{> summaryCard bg="warning" status="flaky" statusHeader="Flaky" statusCount=flakyCount}}
                            {{> summaryCard bg="retry" status="retry" statusHeader="Retry" statusCount=retryCount}}
                        </div>
                        <div class="box">
                            {{> userInfo}}
                        </div>
                    </div>
                    {{!-- Test details --}}
                    <div id="testDetails" style="display: none;">
                        <!-- Back button should be outside the dynamic content -->
                        <button class="button content" id="back-to-summary" onclick="showSummary()">Back to
                            Summary</button>
                        <!-- Test Details will be displayed here -->
                    </div>
                </section>
            </div>
        </main>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function escapeHtml(unsafe) {
            return unsafe.replace(/[&<"']/g, function (match) {
                const escapeMap = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return escapeMap[match];
            });
        }
        document.addEventListener('DOMContentLoaded', () => {
            const testData = {{{ json results }}};
            const testDetails = document.getElementById('testDetails');
            const summary = document.getElementById('summary');
            const backButton = document.querySelector('button#back-to-summary');

            const themeButton = document.getElementById("toggle-theme");
            const preferredTheme = themeButton.getAttribute("data-theme-status");
            const themeIcon = document.getElementById("theme-icon");
            const htmlElement = document.documentElement;
           
            if (preferredTheme === 'dark') {
                htmlElement.setAttribute('data-theme', 'dark');
                themeIcon.classList='';
                themeIcon.classList.add("fa","fa-moon");
            } else if (preferredTheme === 'light') {
                htmlElement.setAttribute('data-theme', 'light');
                themeIcon.classList='';
                themeIcon.classList.add("fa","fa-sun");
            } else {
                if(window.matchMedia('(prefers-color-scheme: light)').matches){
                    themeIcon.classList.add("fa","fa-sun");
                }
                else{
                    themeIcon.classList.add("fa","fa-moon");
                }
            }
            themeButton.addEventListener('click', () => {
                const currentTheme = htmlElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                htmlElement.setAttribute('data-theme', newTheme);
                if (newTheme === 'dark') {
                    themeIcon.classList='';
                    themeIcon.classList.add("fa","fa-moon");
                } else {
                    themeIcon.classList='';
                    themeIcon.classList.add("fa","fa-sun");
                }
            });

            function showSummary() {
                summary.style.display = 'block';
                testDetails.style.display = 'none';
                backButton.style.display = 'none';
            }
            window.showSummary = showSummary;

            function displayTestDetails(test) {
                let currentScreenshotIndex = 0;
                function changeScreenshot(direction) {
                    const screenshots = test.screenshots;
                    currentScreenshotIndex = (currentScreenshotIndex + direction + screenshots.length) % screenshots.length;
                    updateScreenshot();
                }

                function gotoScreenshot(index) {
                    currentScreenshotIndex = index;
                    updateScreenshot();
                }

                function updateScreenshot() {
                    const screenshots = test.screenshots;
                    document.getElementById('screenshot-main-img').src = screenshots[currentScreenshotIndex];
                    document.getElementById('screenshot-modal-img').src = screenshots[currentScreenshotIndex];

                    document.querySelectorAll('.pagination-link').forEach((link, index) => {
                        if (index === currentScreenshotIndex) {
                            link.classList.add('is-current');
                        } else {
                            link.classList.remove('is-current');
                        }
                    });
                }
                const summary = document.getElementById('summary');
                const testDetails = document.getElementById('testDetails');
                const backButton = document.querySelector('button#back-to-summary');
                summary.style.display = 'none';
                testDetails.style.opacity = '0';
                testDetails.style.display = 'block';
                setTimeout(() => {
                    testDetails.style.opacity = '1';
                    backButton.style.opacity = '1';
                }, 50);

                let statusClass = '';
                let statusText = test.status.toUpperCase();
                if (test.status.startsWith('passed')) {
                    statusClass = 'tag is-success';
                } else if (test.status === 'flaky') {
                    statusClass = 'tag is-warning';
                } else if (test.status === 'failed') {
                    statusClass = 'tag is-danger';
                } else {
                    statusClass = 'tag is-info';
                }

                testDetails.innerHTML = `
                  <button class="button content" id="back-to-summary" style="display: block"
                    onclick="showSummary()">
                    <span class="icon"><i class="fa-solid fa-chevron-left" style="color: #63E6BE;"></i></span>
                    <span>Back to Summary</span></button>
                    <div class="content has-text-centered">
                        <p class="title">${test.title}</p>
                        <p class="subtitle" id="filepath">${test.location}</p>
                    </div>
                    <div class="columns">
                        <div class="column content">
                            <h4 class="title is-4">Status</h4>
                            <p class="${statusClass}">${statusText}</p>
                            ${test.duration.length > 0 ? `
                            <h4 class="title is-4">Duration</h4>
                            <p class="${statusClass}">${test.duration}</p>` : ""}
                            ${test.projectName.length > 0 ? `
                            <div class="control">
                                <div class="tags has-addons">
                                <span class="tag is-dark">Project</span>
                                <span class="tag is-info is-capitalized">${test.projectName}</span>
                                </div>
                            </div>`: ""}
                            ${test.testTags.length > 0 ? `
                            <div class="control mt-4">
                                <div class="tags has-addons">
                                <span class="tag is-dark">Test Tags</span>
                                <span class="tag is-info">${test.testTags.join(" ")}</span>
                                </div>
                            </div>`: ""}
                            ${test.videoPath ? `
                            <div id="testVideo" class="modal">
                                <div class="modal-background"></div>
                                    <div class="modal-content">
                                        <figure>
                                            <video controls>
                                                <source src="file://${test.videoPath}" type="video/webm">
                                                Your browser does not support the video tag.
                                            </video>
                                        </figure>
                                    </div>
                                <button onclick="closeVideo()" class="modal-close is-large" aria-label="close"></button>
                            </div>
                            <button class="button mt-4" onclick="openVideo()">Attachment: Video</button>
                            `: ''}
                            ${test.tracePath ? `
                            <div class="trace-viewer mt-4">
                                <a href="${test.tracePath}" target="_blank" class="button is-small is-link">
                                View Trace
                                </a>
                            </div>
                            ` : ''}
                        </div>
                        <div class="column content">
                        ${test.screenshots && test.screenshots.length > 0 ? `
                            <div id="testImage" class="modal">
                                <div class="modal-background"></div>
                                <div class="modal-content">
                                    <p class="image">
                                        <img id="screenshot-modal-img" src="${test.screenshots[0]}" alt="Screenshot">
                                    </p>
                                </div>
                                <button onclick="closeModal()" class="modal-close is-large" aria-label="close"></button>
                            </div>

                            <figure class="image box">
                                <img id="screenshot-main-img" onclick="openModal()" src="${test.screenshots[0]}" alt="Screenshot">
                            </figure>
                            <nav class="pagination is-small is-centered ${test.screenshots.length > 1 ? '' : 'is-hidden'}" role="navigation" aria-label="pagination">
                                <a class="pagination-previous" >Previous</a>
                                <a class="pagination-next" >Next</a>
                                <ul class="pagination-list">
                                    ${test.screenshots.map((_, index) => `
                                        <li>
                                            <a class="pagination-link ${index === 0 ? 'is-current' : ''}" aria-label="Goto screenshot ${index + 1}" >${index + 1}</a>
                                        </li>`).join('')}
                                </ul>
                            </nav>
                        ` : ''}
                    </div>

                    </div>
                    <div class="content">
                        ${test.steps.length > 0 ? `
                        <details id="stepopen">
                            <summary><h4 class="title is-4">Steps</h4></summary>
                            <span id="stepDetails" class="content"></span>
                        </details>
                        `: ``}
                    </div class="content">
                    <div>
                        ${test.errors.length ? `
                        <h4 class="title is-4">Errors</h4>
                        <div class="content">
                            <pre><code class="data-lang=js">${escapeHtml(test.errors.join('\n'))}</code></pre>
                        </div>` : ''}
                    </div>
                    <div>
                        ${test.logs ? `
                        <h4 class="title is-4">Logs</h4>
                        <div class="box">
                            <pre>${escapeHtml(test.logs)}</pre>
                        </div>` : ''}
                    </div>
                `;
                document.querySelector('.pagination-previous').addEventListener('click', () => changeScreenshot(-1));
                document.querySelector('.pagination-next').addEventListener('click', () => changeScreenshot(1));
                document.querySelectorAll('.pagination-link').forEach((link, index) => {
                    link.addEventListener('click', () => gotoScreenshot(index));
                });
                const stepDetailsDiv = document.getElementById('stepDetails');
                if (stepDetailsDiv) {
                    const stepsList = attachSteps(test);
                    const detail = document.getElementById("stepopen");
                    if (test.errors.length > 0) {
                        detail.setAttribute("open", "");
                    }
                    stepDetailsDiv.appendChild(stepsList);
                }

            }

            function attachSteps(test) {
                const stepsList = document.createElement("ul");
                stepsList.setAttribute("id", "steps");
                stepsList.innerHTML = '';
                test.steps.forEach(step => {
                    const li = document.createElement('li');
                    li.innerHTML = `<strong class="${step.snippet ? 'has-text-danger' : ''}">${step.title}</strong>`;
                    if (step.snippet) {
                        const pre = document.createElement('pre');
                        const code = document.createElement('code');
                        const locationText = step.location ? `\n\nat: ${step.location}` : '';
                        code.textContent = `${step.snippet}${locationText}`;
                        code.setAttribute('data-lang', 'js');
                        pre.appendChild(code);
                        li.appendChild(pre);
                    }
                    stepsList.appendChild(li);
                });
                return stepsList;
            }
            function openModal() {
                let modal = document.querySelector("#testImage");
                modal.classList.add("is-active");
            }
            function openVideo() {
                let modal = document.querySelector("#testVideo");
                modal.classList.add("is-active");
            }
            function closeVideo() {
                let modal = document.querySelector("#testVideo");
                modal.classList.remove("is-active");
            }
            function closeModal() {
                let modal = document.querySelector("#testImage");
                modal.classList.remove("is-active");
            }

            window.openModal = openModal;
            window.openVideo = openVideo;
            window.closeVideo = closeVideo;
            window.closeModal = closeModal;

            document.addEventListener('keydown', (event) => {
                if (event.key === "Escape") {
                    closeModal();
                }
            });

            function attachEventListeners() {
                const checkboxes = document.querySelectorAll('#select-filter input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', applyFilters);
                });
                const testItems = document.querySelectorAll('[data-test-id]');
                testItems.forEach(item => {
                    item.addEventListener('click', () => {
                        testItems.forEach(i => i.classList.remove('listselected'));
                        item.classList.add('listselected');
                        const testId = item.getAttribute('data-test-id');
                        const test = testData[testId];
                        displayTestDetails(test);
                    });
                });
                const filters = document.querySelectorAll('.filter');
                filters.forEach(filter => {
                    filter.addEventListener('click', () => {
                        const status = filter.getAttribute('data-status');
                        filters.forEach(f => {
                            if (f.getAttribute('data-status')) {
                                f.classList.remove('active');
                            }
                        });
                        filter.classList.add('active');
                        applyFilters();
                    });
                });
            }

            function applyFilters() {
                const selectedCheckboxes = document.querySelectorAll('#select-filter input[type="checkbox"]:checked');
                const activeFilter = document.querySelector('.filter.active');
                const selectedStatus = activeFilter ? activeFilter.getAttribute('data-status') : 'all';
                const selectedProjects = [];
                const selectedTags = [];
                selectedCheckboxes.forEach(checkbox => {
                    if (checkbox.getAttribute('data-filter-type') === 'project') {
                        selectedProjects.push(checkbox.value.trim());
                    } else {
                        selectedTags.push(checkbox.value.trim());
                    }
                });
                const detailsElements = document.querySelectorAll('.sidebar details');
                detailsElements.forEach(details => {
                    let shouldShowDetails = false;
                    const items = details.querySelectorAll('li[data-test-id]');
                    items.forEach(item => {
                        const testTags = item.getAttribute('data-test-tags').trim().split(' ').filter(Boolean);
                        const projectName = item.getAttribute('data-project-name').trim();
                        const testStatus = item.getAttribute('data-test-status').trim();
                        const matchesProject = selectedProjects.length === 0 || selectedProjects.includes(projectName);
                        const matchesTags = selectedTags.length === 0 || selectedTags.every(tag => testTags.includes(tag));
                        const matchesStatus = (selectedStatus === 'all' && testStatus !== 'skipped') ||
                            (selectedStatus !== 'all' && (
                                testStatus === selectedStatus ||
                                (selectedStatus === 'failed' && (testStatus === 'failed' || testStatus === 'timedOut')) ||
                                (selectedStatus === 'retry' && testStatus.includes('retry')) ||
                                (selectedStatus === 'flaky' && testStatus.includes('flaky'))
                            ));
                        if (matchesProject && matchesTags && matchesStatus) {
                            item.classList.remove('is-hidden');
                            shouldShowDetails = true;
                        } else {
                            item.classList.add('is-hidden');
                        }
                    });
                    details.open = shouldShowDetails;
                    details.classList.toggle('is-hidden', !shouldShowDetails);
                });
                updateSelectedFiltersDisplay(selectedProjects, selectedTags, selectedStatus);
            }

            function updateSelectedFiltersDisplay(projects, tags, status) {
                const filtersDisplay = document.getElementById('selected-filters');
                filtersDisplay.innerHTML = '';

                if (projects.length > 0) {
                    filtersDisplay.innerHTML += `<span> Projects: ${projects.join(', ')}</span>`;
                }
                if (tags.length > 0) {
                    filtersDisplay.innerHTML += `<span> Tags: ${tags.join(', ')}</span>`;
                }
                if (status !== 'all') {
                    filtersDisplay.innerHTML += `<span> Status: ${status}</span>`;
                }

                if (filtersDisplay.innerHTML === '') {
                    filtersDisplay.innerHTML = '<span>All Tests</span>';
                }
            }
            const searchInput = document.querySelector('input[name="search"]');
            const detailsElements = document.querySelectorAll('details');
            function filterTests(search) {
                const searchTerm = search.toLowerCase();
                const testItems = document.querySelectorAll('[data-test-id]');

                if (searchTerm) {
                    detailsElements.forEach(detail => {
                        detail.open = false; // Collapse all details initially
                    });

                    testItems.forEach(item => {
                        const testTitle = item.textContent.toLowerCase();
                        if (testTitle.includes(searchTerm)) {
                            item.style.display = 'block'; // Show matching test item

                            let parent = item.parentElement;
                            while (parent && parent.tagName !== 'ASIDE') {
                                if (parent.tagName === 'DETAILS') {
                                    parent.open = true;
                                }
                                parent = parent.parentElement;
                            }
                        } else {
                            item.style.display = 'none';
                        }
                    });
                } else {
                    testItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    detailsElements.forEach(detail => {
                        detail.open = false;
                    });
                }
            }
            function debounce(func, wait) {
                let timeout;
                return function (...args) {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            }

            const debouncedSearch = debounce((event) => {
                filterTests(event.target.value);
            }, 300);

            searchInput.addEventListener('input', debouncedSearch);

            const ctx = document.getElementById('testChart');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Passed', 'Failed', 'Skipped', 'Flaky'],
                    datasets: [{
                        data: [{{ passCount }}, {{ failCount }}, {{ skipCount }}, {{ flakyCount }}],
                        backgroundColor: ['#28a745', '#ff6685', '#66d1ff', '#ffb70f']
                    }]
                },
                options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                }
                }
            });
            attachEventListeners();
            });
    </script>
</body>

</html>